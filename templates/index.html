<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Detector de Sentimiento</title>

    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 p-8">
    <div class="max-w-xl mx-auto bg-white p-6 rounded-xl shadow-lg">
      <h1 class="text-2xl font-bold mb-4 text-center"></h1>
      Análisis de reseñas de películas

      <label class="block mb-2 font-semibold">Ingresa una reseña:</label>
      <textarea
        id="texto"
        class="w-full border p-3 rounded-lg mb-4"
        rows="4"
      ></textarea>

      <button
        onclick="analizar()"
        class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700"
      >
        Analizar
      </button>

      <div id="resultado" class="mt-4 text-center text-lg font-bold"></div>
    </div>

    <script>
      async function analizar() {
        const texto = document.getElementById("texto").value;
        const salida = document.getElementById("resultado");

        salida.innerHTML = "Analizando...";

        try {
          const response = await fetch("http://127.0.0.1:5000/predict", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ texto: texto }),
          });

          const data = await response.json();

          if (data.error) {
            salida.innerHTML = "Error: " + data.error;
            return;
          }

          // Mostrar resultado con color
          let sentimiento = data.sentimiento;
          let color =
            sentimiento === "positivo" ? "text-green-600" : "text-red-600";

          salida.innerHTML = `
                    Resultado: <span class="${color}">${sentimiento.toUpperCase()}</span>
                    <br>
                    (Confianza: ${(data.probabilidad * 100).toFixed(2)}%)
                `;
        } catch (e) {
          salida.innerHTML = "Error conectando con la API.";
        }
      }
    </script>
  </body>
</html>
